<UserControl x:Class="Trace.Views.test"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Trace.Views"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800"
             xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes" xmlns:hc="https://handyorg.github.io/handycontrol" xmlns:i="http://schemas.microsoft.com/xaml/behaviors">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="8*"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <DataGrid
    Grid.Row="0"
    Margin="20"
    VerticalContentAlignment="Center"
    AutoGenerateColumns="False"
    CanUserAddRows="False"
    CanUserResizeRows="False"
    HeadersVisibility="All"
    ItemsSource="{Binding UserList}"
    RowHeaderWidth="60"
    RowHeight="40"
    ScrollViewer.VerticalScrollBarVisibility="Hidden"
    HorizontalGridLinesBrush="AliceBlue"
    >
            <DataGrid.Resources>
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesign2.Defaults.xaml" />
            </DataGrid.Resources>
            <DataGrid.RowHeaderTemplate>
                <DataTemplate>
                    <CheckBox Margin="10" IsChecked="{Binding IsSelected, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGridRow}}" />
                </DataTemplate>
            </DataGrid.RowHeaderTemplate>


            <DataGrid.Columns>
                <!--  UserID Column  -->

                <DataGridTextColumn
            Width="*"
            Binding="{Binding UserID}"
            Header="用户ID"
            IsReadOnly="True" />

                <!--  Avatar Column  -->
                <DataGridTemplateColumn
            Width="60"
            CanUserResize="False"
            Header="头像">

                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Image
                        Width="32"
                        Height="32"
                        Stretch="Uniform" />
                            <!--  Source="{Binding AvatarData, Converter={StaticResource ByteArrayToImageConverter}}"  -->

                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!--  Username Column  -->

                <DataGridTextColumn
            Width="*"
            Binding="{Binding Username}"
            CanUserSort="False"
            Header="账号" />
                <!--  Fullname Column  -->
                <DataGridTextColumn
            Width="*"
            Binding="{Binding FullName}"
            CanUserSort="False"
            Header="姓名" />

                <DataGridTemplateColumn Header="Template Column">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock
                        FontSize="14"
                        FontStyle="Italic"
                        Text="{Binding FullName}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <TextBox
                        md:TextFieldAssist.UnderlineBrush="Red"
                        Foreground="Red"
                        SelectionBrush="Black"
                        Text="{Binding FullName}" />

                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>
                <!--  Phone Column  -->
                <DataGridTextColumn
            Width="*"
            Binding="{Binding Phone}"
            Header="手机号" />

                <!--  Role Column  -->
                <DataGridTextColumn
            Width="*"
            Binding="{Binding Role}"
            CanUserSort="False"
            Header="权限" />

            </DataGrid.Columns>
        </DataGrid>

        <DockPanel Grid.Row="1">
            <DockPanel.Resources>
                <ResourceDictionary Source="pack://application:,,,/HandyControl;component/Themes/SkinDefault.xaml" />
              
            </DockPanel.Resources>
            <Viewbox Grid.Row="1" Height="100">
                <StackPanel
           Margin="20,10,20,50"
           HorizontalAlignment="Center"
           Orientation="Horizontal">
                    <hc:Pagination
               x:Name="paginationControl"
               DataCountPerPage="10"
               IsJumpEnabled="True"
               MaxPageCount="{Binding TotalPages, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
               MaxPageInterval="4"
               PageIndex="{Binding PageIndex, Mode=OneWayToSource, UpdateSourceTrigger=PropertyChanged}">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="PageUpdated">
                                <i:InvokeCommandAction Command="{Binding JumpCommand}" PassEventArgsToCommand="True" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </hc:Pagination>
                </StackPanel>
            </Viewbox>
        </DockPanel>
    </Grid>
</UserControl>
